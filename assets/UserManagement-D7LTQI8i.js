import{a as M,r as t,j as e,e as L}from"./index-DEe-8F7z.js";import{u as D}from"./useFetch-BmlXr4D_.js";import{B as l,T as m}from"./TextInput-BJn3TXke.js";import{A as I}from"./Alert-8-9IOOi5.js";const B=()=>{const{darkMode:i}=M(),[b,x]=t.useState([]),[d,v]=t.useState(""),[r,h]=t.useState(null),[N,p]=t.useState(!1),[w,u]=t.useState(!1),[g,n]=t.useState(""),[k,c]=t.useState(""),{data:o,loading:S,error:y,refetch:C}=D("/api/users");t.useEffect(()=>{o&&x(o)},[o]);const A=s=>{v(s.target.value)},f=b.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())|s.email.toLowerCase().includes(d.toLowerCase())),U=s=>{h(s),p(!0)},T=()=>{h(null),p(!1)},E=async s=>{try{u(!0),await new Promise(a=>setTimeout(a,1e3)),x(user.filter(a=>a.id!==s)),j("User deleted successfully","success")}catch{j("Failed to delete user","error")}finally{u(!1)}},j=(s,a)=>{n(s),c(a),setTimeout(()=>{n(""),c("")},3e3)};return S?e.jsx(L,{size:"lg"}):y?e.jsxs("div",{className:"text-center py-10",children:[e.jsx("p",{className:"text-red-500",children:"Failed to load users"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:y.message||"An unknown error occurred"}),e.jsx(l,{onClick:C,className:"mt-4",children:"Try Again"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:`text-2xl font-semibold ${i?"text-white":"text-gray-900"}`,children:"User Management"}),e.jsx(l,{variant:"primary",children:"Add New User"})]}),g&&e.jsx("div",{className:"mt-4",children:e.jsx(I,{type:k,message:g,onClose:()=>{n(""),c("")}})}),e.jsx("div",{className:"mt-6",children:e.jsx(m,{id:"search",placeholder:"Search users...",value:d,onChange:A})}),e.jsx("div",{className:"mt-6 overflow-hidden shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg",children:e.jsxs("table",{className:`min-w-full divide-y divide-gray-300 dark:divide-gray-700 ${i?"bg-gray-800 text-white":"bg-white text-gray-900"}`,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold sm:pl-6",children:"Name"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold",children:"Email"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold",children:"Role"}),e.jsx("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold",children:"Status"}),e.jsx("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"py-4 text-center text-sm italic text-gray-500 dark:text-gray-400",children:"No users found"})}):f.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium sm:pl-6",children:s.name}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:s.email}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:s.role}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:s.status})}),e.jsxs("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:[e.jsx("button",{onClick:()=>U(s),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>E(s.id),disabled:w,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})]},s.id))})]})}),N&&r&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsxs("div",{className:`inline-block align-bottom ${i?"bg-gray-800 text-white":"bg-white text-gray-900"} rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full`,children:[e.jsxs("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium",children:"Edit User"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsx(m,{id:"edit-name",label:"Name",value:r.name}),e.jsx(m,{id:"edit-email",label:"Email",type:"email",value:r.email}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role"}),e.jsxs("select",{id:"role",name:"role",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",defaultValue:r.role,children:[e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"editor",children:"Editor"}),e.jsx("option",{value:"user",children:"User"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{id:"status",name:"status",className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",defaultValue:r.status,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx(l,{variant:"primary",className:"sm:ml-3",children:"Save Changes"}),e.jsx(l,{variant:"secondary",onClick:T,children:"Cancel"})]})]})]})})]})};export{B as default};
